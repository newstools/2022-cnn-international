(CNN)The Senate on Thursday night passed a bipartisan bill to address gun violence that amounts to the first major federal gun safety legislation in decades. The final vote was 65 to 33 with 15 Republicans joining Democrats in support of the measure, marking a significant bipartisan breakthrough on one of the most contentious policy issues in the country. The bill will next go to the House for a vote before it can be sent to President Joe Biden to be signed into law. The bipartisan gun deal includes millions of dollars for mental health, school safety, crisis intervention programs and incentives for states to include juvenile records in the National Instant Criminal Background Check System. It also makes significant changes to the process when someone ages 18 to 21 goes to buy a firearm and closes the so-called boyfriend loophole, a victory for Democrats, who have long fought for that. The package amounts to the most significant new federal legislation to address gun violence since the expired 10-year assault weapons ban of 1994 -- though it fails to ban any weapons and falls far short of what Democrats and polls show most Americans want to see. There were a few dozen people in the Senate gallery ahead of the final vote. Senators had noted there were gun violence survivors, family members and groups in attendance to watch the historic vote in the chamber. The vote on the federal gun safety bill came on the same day as the Supreme Court struck down a New York gun law enacted more than a century ago that places restrictions on carrying a concealed handgun outside the home. The ruling highlights the conflicting political forces surrounding the issue at all levels of government, as the judicial branch implements the widest expansion of gun rights in a decade, happening right as the legislative branch appears on track to pass its most significant gun safety package in almost 30 years. A critical vote that required GOP support The gun safety bill had moved a step closer to passage in the Senate earlier in the day after a critical vote succeeded in advancing the measure with Republican support. The vote was 65-34, with 15 GOP senators joining Democrats to break the filibuster. The same 15 GOP senators who voted to break the filibuster voted to approve the measure on final passage. The GOP "yes" votes include all 10 Senate Republicans who signed on to an initial gun safety framework deal: John Cornyn of Texas, Thom Tillis of North Carolina, Roy Blunt of Missouri, Richard Burr of North Carolina, Bill Cassidy of Louisiana, Susan Collins of Maine, Lindsey Graham of South Carolina, Rob Portman of Ohio, Mitt Romney of Utah and Pat Toomey of Pennsylvania. Four of the 10 original Republican supporters are retiring this year: Blunt, Burr, Portman and Toomey. Senate GOP Leader Mitch McConnell, Sens. Joni Ernst of Iowa and Shelley Moore Capito of West Virginia, who are in GOP leadership, also voted to break a filibuster on the bill. Other noteworthy GOP votes include Sens. Lisa Murkowski of Alaska and Todd Young of Indiana, who were not part of the 10 Republicans who initially signed on to support the framework and are up for reelection in November. House Speaker Nancy Pelosi announced late Thursday after the bill had passed the Senate that the House will take it up on Friday. The legislation came together in the aftermath of recent, tragic mass shootings at a Uvalde, Texas, elementary school and at a Buffalo, New York, supermarket, which was in a predominantly Black neighborhood. A bipartisan group of negotiators set to work in the Senate and unveiled legislative text on Tuesday. The bill -- titled the Bipartisan Safer Communities Act -- was released by Republican Sens. John Cornyn of Texas and Thom Tillis of North Carolina and Democratic Sens. Chris Murphy of Connecticut and Kyrsten Sinema of Arizona. Lawmakers were racing to pass the bill before leaving for the July 4 recess. The fact that bill text was finalized, and the legislation now appears poised to pass the Senate, is a major victory for the negotiators who came together to strike a deal. The bipartisan effort appeared to be on thin ice after several key sticking points emerged, but ultimately negotiators were able to resolve issues that arose. The deal marks a rare instance of compromise across party lines on one of the most contentious issues in Washington -- a feat in today's highly polarized political environment. Reaching a bipartisan agreement on major gun legislation has been notoriously difficult for lawmakers in recent years even in the face of countless mass shootings across the country. "For too long political games in Washington on both sides of the aisle have stopped progress towards protecting our communities and keeping families safe and secure," Sinema said Wednesday in a Senate floor speech. "Casting blame and trading political barbs and attacks became the path of least resistance, but the communities across our country who have experienced senseless violence deserve better than Washington politics as usual," the Arizona Democrat said. "Our communities deserve a commitment by their leaders to do the hard work of putting aside politics, identifying problems that need solving, and working together towards common ground and common goals." Key provisions in the bill The bill includes $750 million to help states implement and run crisis intervention programs. The money can be used to implement and manage red flag programs -- which can temporarily prevent individuals in crisis from accessing firearms through a court order -- and for other crisis intervention programs like mental health courts, drug courts and veterans courts. This bill closes a years-old loophole in domestic violence law -- the "boyfriend loophole" -- that barred individuals who were convicted of domestic violence crimes against married partners, or partners with whom they shared children or partners with whom they cohabitated, from having guns. Old statutes didn't include intimate partners who may not live together, be married or share children. Now, the law will bar from having a gun anyone who is convicted of a domestic violence crime against someone they have a "continuing serious relationship of a romantic or intimate nature." The law isn't retroactive. It will, however, allow those convicted of misdemeanor domestic violence crimes to restore their gun rights after five years if they haven't committed other crimes. The bill encourages states to include juvenile records in the National Instant Criminal Background Check System with grants as well as implements a new protocol for checking those records. The bill goes after individuals who sell guns as primary sources of income but have previously evaded registering as federally licensed firearms dealers. It also increases funding for mental health programs and school security. GOP divided over the bill A split has emerged among some prominent members of House and Senate GOP leadership. Senate Minority Leader Mitch McConnell had said he supported the bipartisan gun deal. But top House Republican leaders have been lining up in opposition to the bill and are urging their members to vote "no," even as the Senate moves toward passage of the bill this week. But even with House GOP leaders opposing the bill, there are already some House Republicans who have indicated they plan to vote for it, and the Democrat-controlled chamber is expected to be able to pass the legislation once it passes in the Senate. "While more is needed, this package must quickly become law to help protect our children," Pelosi said in a statement. This story and headline have been updated with additional developments Thursday. CNN's Daniella Diaz and Tierney Sneed contributed.