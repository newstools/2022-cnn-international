(CNN)It was the middle of the night in Saudi Arabia when word emerged from Washington that President Joe Biden's long-stalled domestic agenda was dead. Again. The culprit was familiar. Sen. Joe Manchin, the moderate West Virginia Democrat, was balking at what effect the massive climate, tax and social safety net plan might have on inflation. In Jeddah, where Biden was convening fraught meetings with Saudi leaders, the news was met with frustration and anger but not surprise. Thirteen days, two Covid infections and a few bitter arguments later, fortunes have shifted. Manchin and Senate Majority Leader Chuck Schumer shocked most of Washington on Wednesday when they announced, after restarting their negotiations in secret four days after they fell apart, an agreement on a version of Biden's long-stalled climate, energy and tax agenda. It's less than half the size of Biden's original Build Back Better bill, and Manchin made sure to emphasize that name had been scrapped. Republicans are uniformly opposed, and certain Democrats in both the Senate and House have yet sign on, making the Inflation Reduction Act of 2022 anything but a done deal. But after appearing moribund for months, the agreement injected new life into ambitions that many Democrats had mostly put aside. Paired with Thursday's passage of a bill boosting US computer chip production, the President's legislative prospects are looking up. Biden spoke to the senator — who is isolating with Covid in the mountains of West Virginia — on Wednesday, having mostly given up on formal talks with Manchin after watching the senator repeatedly derail his agenda. It was their first formal call on Democrats' agenda since December. "The work of the government can be slow and frustrating and sometimes even infuriating," Biden said a day later, emerging into the White House's State Dining Room to herald the surprise developments. "Then the hard work of hours and days and months for people who refuse to give up pays off. History is made. Lives are changed." The climate and tax deal came together in almost complete secret, catching many by surprise Wednesday when it was announced in the late afternoon. "Holy shit," Sen. Tina Smith of Minnesota wrote on Twitter. "Stunned, but in a good way." That sentiment was a distant cry from the mood among Democrats on July 14, the day Manchin publicly torpedoed the climate and energy measures that had been at the center of the Biden administration's pledge to dramatically reduce carbon emissions. After dying repeated deaths over the past year, the blow two weeks ago to the President's domestic agenda was hardly a shock to the White House. Senior administration officials had by then adopted a deeply skeptical view of negotiations between Manchin and Schumer over reviving the President's plans. As he was quick to point out himself, Biden had been mostly excused from the talks altogether. "I didn't negotiate with Joe Manchin," he said on July 15 inside the Waldorf Astoria hotel in Jeddah when a reporter asked whether Manchin was negotiating in good faith. "I have no idea." The most conservative Democrat in the Senate had concerns about the most recent inflation numbers. A report on July 14 showed inflation rising 9.1% year-over-year in June, a 40-year high. "When that 9.1 came in, I said, 'I can't, I just can't do it,'" Manchin said Thursday, recounting the conversation he held with Schumer after the two had been in private talks on reviving Biden's climate priorities for three months. "That's when Chuck got upset." The conversations weren't always calm or collected. "Our tempers get a little bit ahead of us at times," Manchin said, saying some had "turned the dogs loose" on him for what they said was walking away from the deal. By the following week, however, the two senators had lowered the temperature. Passing each other in a Capitol hallway on July 18, Manchin asked Schumer if he was still upset. "I said, 'This is ridiculous,'" Manchin said. "Let's recalibrate and see if there's something that can be done. And to his credit, he says, 'OK.'" Schumer said at a news conference Thursday that Manchin came to him that day with an offer: "Can we work together and try and put together a bill?" Even then, however, the timeline was uncertain. Manchin had said publicly he'd do nothing on climate until September and would have to wait until he saw August's inflation numbers. Schumer was firm with Manchin that a climate deal needed to be reached before then. "I said, 'As long as we finish it in August, we're not waiting for September,'" Schumer recounted. Manchin initially refused, but Schumer plowed ahead with items the West Virginian would support. The senator eventually came back and said he was willing to move forward with an August timeline, the aide said. Helping secure his support were a few commitments and concessions. Not included in the final bill are tax increases on wealthy Americans pushed by Biden and other Democrats. And Manchin has made clear he would not have come on board unless Democratic leaders vowed to enact legislation addressing the permitting of energy infrastructure, which could ease the path for a shale gas pipeline in West Virginia. Meanwhile, former Treasury Secretary Larry Summers — who issued early warnings about inflation last year, often to the irritation of the Biden administration — also privately reached out to Manchin to argue the deal would not add to inflation but would instead be deflationary. Summers declined to comment on his private conversations during an interview on CNN, though offered reassurance to counter worries that the bill could add to inflation. "This bill is fighting inflation and it's got a whole set of collateral benefits as well," he said on "New Day." Summers wasn't alone in working Manchin behind the scenes. Democratic Sen. John Hickenlooper of Colorado told reporters he and his staff were getting analysis of the tax and climate deal from economists at the Wharton School of Business at the University of Pennsylvania. "We knew that (Manchin) trusted Wharton, that he'd used that for modeling before," Hickenlooper told reporters. "So, we asked them to model this. We did that and got back modeling that said this is not inflationary in any way, and we sent that to Joe." Hickenlooper said he was trying to add to a drumbeat of voices trying to convince Manchin the deal would bring down inflation. Other senators -- including Smith, Sens. Brian Schatz of Hawaii and Chris Coons of Delaware — were making similar arguments, Hickenlooper added. "I was listening to every single thing that Joe said he had a problem with, and I was trying to address it," Hickenlooper said. "When he's told me the problem's inflation, and the rest of it he could get to, I took him at his word." At the White House, senior officials were aware that serious discussions were underway, but were intentionally not directly involved, according to administration aides. People around Biden had been leery of involving him in another round of legislative drama, only for negotiations to fall apart again. "President Biden was not involved," Manchin said during a radio interview Thursday. "I was not going to bring the President in, I didn't think it was fair to bring him in, and this thing could very well have not happened at all. It could have absolutely gone sideways. I had to see if we could make this work." White House officials weren't deeply read in on the content of the agreement until right at the end. "It was a very well-kept secret," one official told CNN. As the deal was coming together in the past several days, both Biden and Manchin became infected with Covid. Biden worked from the White House residence and Manchin was isolating in the mountains of his home state. By Wednesday, Manchin and Schumer had struck an agreement — and announced it minutes after the computer chips bill had passed the Senate. Some saw the timing as less-than-coincidental; Senate Republican Leader Mitch McConnell had vowed to block the chips measure if Democrats advanced a bill containing Biden's agenda. "I think everyone got surprised, certainly by representations that had been made by Democrats about this deal, and I think there was certain amount of people being blindsided — not only on our side but on the Democrats' side," Senate Republican Whip John Thune said Thursday. Asked if McConnell played the deal properly, he said: "You'll have to chat with him about that." Despite their celebrations Thursday, Democrats face what is likely still an uphill climb in securing enough support for the package, even among members of their own party. Speaking behind closed doors Thursday, Schumer told Democrats they were on the precipice of passing items they'd been talking about for years. "It will require us to stick together and work long days and nights for the next 10 days," he said. "We will need to be disciplined in our messaging and focus. It will be hard." CNN's Kaitlan Collins contributed to this report