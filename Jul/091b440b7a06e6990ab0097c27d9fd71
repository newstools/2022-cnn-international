(CNN)Senate Majority Leader Chuck Schumer and Sen. Joe Manchin on Wednesday announced a deal on an energy and health care bill, representing a breakthrough after more than a year of negotiations that have collapsed time and again. But it will face furious GOP opposition. The deal is a major reversal for Manchin, and the health and climate bill stands a serious chance of becoming law as soon as August -- assuming Democrats can pass the bill in the House and that it passes muster with the Senate parliamentarian to allow it to be approved along straight party lines in the budget process. While Manchin scuttled President Joe Biden's Build Back Better bill, the final deal includes a number of provisions the moderate from West Virginia had privately scoffed at, representing a significant reversal from earlier this month. That includes provisions addressing the climate crisis. The agreement contains a number of Democrats' goals. While many details have not been disclosed, the measure would invest $369 billion into energy and climate change programs, with the goal of reducing carbon emissions by 40% by 2030, according to a one-page fact sheet. For the first time, Medicare would be empowered to negotiate the prices of certain medications, and it would cap out-of-pocket costs at $2,000 for those enrolled in Medicare drug plans. It would also extend expiring enhanced subsidies for Affordable Care Act coverage for three years. The announcement comes at a crucial time for Congress, as the Senate is a little over a week away from starting a monthlong recess, when many Democrats will campaign for reelection. The news also came several hours after the Senate passed a separate bill to invest $52 billion in US manufacturing of semiconductors, sending it to the House to consider as soon as this week. Notably, Senate Minority Leader Mitch McConnell had previously vowed to try to halt passage of the semiconductor bill if Democrats continued to pursue their party-line bill on climate and drug prices. Manchin's agreement represents reversal Manchin's support is notable given his stance earlier this month that he "unequivocally" wouldn't support the climate or tax provisions of the Democratic economic package, which appeared to torpedo any hope Democrats had of passing legislation to fight climate change in the near future. But Schumer and Manchin have been in revived talks since July 18 and locked down a deal Wednesday, according to a source familiar with the matter. Manchin had thrown cold water on doing tax and energy provisions as part of the deal, but ultimately agreed to it. The White House has signed off on this deal, Biden said in a statement. The deal still faces multiple hurdles before it can make it to Biden's desk, including the parliamentarian and having to pass both chambers of Congress, where practically any Democrat could sideline or delay passage. Climate provisions 'could be a huge win' In a statement, Schumer's office said the bill would reduce US carbon emissions by roughly 40% by 2030. Clean energy tax credits would drive the majority of those emission reductions, a Democratic aide said. Two weeks ago, Schumer and Manchin were nearing a deal on $375 billion for the climate and energy provisions of the bill; the topline for climate announced tonight is $6 billion less than the original figure. Still, a senior Democratic aide told CNN they were happy with the $369 billion figure on spending for the climate and energy portion of the bill, saying it was more funding than was expected to come out of a deal. Tax credits for electric vehicles made it into the new deal, according to two Senate Democratic aides. Electric Vehicle tax credits will continue at their current levels, up to $4,000 for a used electric vehicle and $7,500 for a new EV. However, there will be a lower income threshold for people who can use the tax credits -- a key demand of Manchin's. Manchin had been staunchly opposed to electric vehicle tax credits throughout negotiations. Democratic Sen. Tina Smith of Minnesota told CNN that she was presiding over the Senate Wednesday evening when Schumer called to tell her he had reached a deal with Manchin on a climate and energy bill. As Smith was presiding, her phone kept ringing off the hook with an unlisted number, which was Schumer calling. Finally, she answered it. "I knew it was Chuck; I did the complete no-no and answered the phone," Smith told CNN. "He said '40% emissions reductions by 2030, this is a big F-ing deal!'" Smith, a Senate climate hawk, told CNN she was elated a deal had been reached after many ups and downs in negotiations with Manchin. She said the agreement was the "most significant action on climate and clean energy we've ever taken." "Everybody is very excited. I'm stunned but in a good way," Smith said. Leaders of two prominent climate groups also told CNN the latest development was unexpected. "This is not what anyone was expecting, but we are so excited it's back on," Tiernan Sittenfeld, the senior vice president of government affairs at the League of Conservation Voters, told CNN. "Obviously it's coming not a moment too soon as families struggle from the crazy heat across the world and country." Advocates were awaiting more details on the climate provisions, expected to be released on Wednesday evening. "We need to see the details of this deal, especially if there's permitting reform and development of fossil fuels," Evergreen Action co-founder Jamal Raad told CNN. "We're going to need to see in the coming days modeling on this legislation." But if the package does indeed achieve the emissions reductions Schumer is promising, Raad said it would be a hugely important step. "If this package does that in a bold way, this could put us on the path to reaching our goals and could be a huge win," he said. Medicare drug price negotiation provisions remain in the bill The deal keeps the prescription drug prices changes that Manchin had previously agreed to, including empowering Medicare to negotiate the price of certain costly medications administered in doctors' offices or purchased at the pharmacy. The Health and Human Services secretary would negotiate the prices of 10 drugs in 2026, and another 15 drugs in 2027 and again in 2028. The number would rise to 20 drugs a year for 2029 and beyond. It would also redesign Medicare's Part D drug plans so that seniors and people with disabilities wouldn't pay more than $2,000 a year for medication bought at the pharmacy. And, the deal would require drug companies to pay rebates if they increase their prices in the Medicare and private-insurance markets faster than inflation. Altogether, the drug price provisions would reduce the deficit by $288 billion over a decade, according to the Congressional Budget Office. The agreement also calls for extending the enhanced Affordable Care Act subsidies for three years. The original deal would have continued the beefed-up subsidies for two years, which meant they would have expired just after the 2024 presidential election -- a scenario that congressional Democrats did not want to encounter. The subsidies were expanded through this year as part of Democrats' $1.9 trillion coronavirus relief package, known as the American Rescue Plan, which was enacted in March 2021. They have made health care coverage on the Obamacare exchanges more affordable, leading to record enrollment this year. Enrollees pay no more than 8.5% of their income toward coverage, down from nearly 10%. And lower-income policyholders receive subsidies that eliminate their premiums completely. Also, those earning more than 400% of the federal poverty level have become eligible for help for the first time. Extending the enhanced subsidies would cost $64 billion over a decade, according to the CBO. Paying for the bill To raise revenue, the bill would impose a 15% minimum tax on corporations, which would raise $313 billion over a decade. While details on the current deal remain scant, the House version of the Build Back Better package would have levied the tax on the corporate profits that large companies report to shareholders, not to the Internal Revenue Service. It would have applied to companies with more than $1 billion in profits and yielded a similar revenue-raising figure. The current deal also aims to close the carried interest loophole, which allows investment managers to treat their compensation as capital gains and pay a 20% long-term capital gains tax rate instead of income tax rates of up to 37%. Eliminating this loophole, which would raise $14 billion over a decade, has been a longtime goal of congressional Democrats. The package also calls for providing more funding to the IRS for tax enforcement, which would raise $124 billion. Democrats say families making less than $400,000 per year would not be affected, in line with a pledge by Biden. Also, there would be no new taxes on small businesses. Manchin said in a statement that the deal would ensure "that large corporations and the ultra-wealthy pay their fair share in taxes," though it doesn't contain the tax rate hikes on rich Americans and big companies that Democrats initially wanted to include in the budget reconciliation packages before they were shot down by Democratic Sen. Kyrsten Sinema of Arizona. Notably, Manchin also threw cold water on one of Schumer's priorities -- addressing the $10,000 cap on state and local tax deductions, known as SALT, that was part of the GOP tax cut package in 2017 and affects many states in the Northeast and on the West Coast. Many details of the current deal remain to be worked out, which could delay or scuttle it, said Howard Gleckman, a senior fellow at the nonpartisan Tax Policy Center. In total, Democrats say the deal would reduce the deficit by more than $300 billion. "Rather than risking more inflation with trillions in new spending, this bill will cut the inflation taxes Americans are paying, lower the cost of health insurance and prescription drugs, and ensure our country invests in the energy security and climate change solutions we need to remain a global superpower through innovation rather than elimination," Manchin said in his own statement Wednesday afternoon. This story has been updated with additional development Wednesday. 